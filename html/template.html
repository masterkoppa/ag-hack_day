<!DOCTYPE html>
<html lang="en">
	<head>
        <meta charset="utf-8">
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="../javascript/turn.min.js" type="text/javascript"></script>
        <script src="../javascript/template.js" type="text/javascript"></script>
        <script src="../bootstrap/js/bootstrap.min.js"></script>
        <link rel="stylesheet" type="text/css" href="../css/template.css" />
        <link href="../bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
	</head>

	<body>
        <div class="navbar">
            <div class="navbar-inner">
                <a class="brand" href="#">CS</a>
                <ul class="nav">
                    <li>
                        <a href="Home.html">
                            <img src="../Images/Navigation/home_btn.png"></img>
                        </a>
                    </li>
                    <li class="active">
                        <a href="#">
                            Config
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        <div id="config_area" align="center">
            <span id="page_num_label">Page number to edit: </span>
            <form id="page_num_form" action="">
                <input type="radio" name="page_num" value="1" onchange="updatePageNum(1)" checked>1
                <input type="radio" name="page_num" value="2" onchange="updatePageNum(2)">2
                <input type="radio" name="page_num" value="3" onchange="updatePageNum(3)">3 <br/>
                <input type="radio" name="page_num" value="4" onchange="updatePageNum(4)">4
                <input type="radio" name="page_num" value="5" onchange="updatePageNum(5)">5
                <input type="radio" name="page_num" value="6" onchange="updatePageNum(6)">6
            </form>
            <span id="header_label">Header: </span>
            <input type="text" id="header_field" oninput="update_header(getPageNum())"/>
            <br/>
            <span id="subheader_label">Subheader: </span>
            <input type="text" id="subheader_field" oninput="update_subheader(getPageNum())"/>
            <br/>
            <span id="media_label">Media path: </span>
            <!--<input type="file" id="image_fileupload" onchange="upload_image(getPageNum())" />-->
            <input id="fileupload" type="file" name="files[]" data-url="../php/" multiple>
            
            <div id="upload_progress" class="progress progress-striped active" style="width: 30%; visibility: hidden;">
                <div class="bar" style="width: 0%;"></div>
            </div>
            <br/>
            <input type="button" id="page_left" onclick="page_left()" value="<<" />
            &nbsp;&nbsp;&nbsp;
            <input type="button" id="page_right" onclick="page_right()" value=">>" />
            <br/>
        </div>
        <br/>
        <div id='card'>
            <div id='page1' ondrop="drop(event)" ondragover="allowDrop(event)" class="page">
                <div class="page_border">
                    <span id="page1_header" class="dragndrop_elem header" draggable="true" ondragstart="drag(event)"></span>
                    <span id="page1_subheader" class="dragndrop_elem subheader" draggable="true" ondragstart="drag(event)"></span>
                    <div id="page1_media" class="dragndrop_elem" draggable="true" ondragstart="drag(event)"></div>
                </div>
            </div>
            <div id='page2' ondrop="drop(event)" ondragover="allowDrop(event)" class="page">
                <div class="page_border">
                    <span id="page2_header" class="dragndrop_elem header" draggable="true" ondragstart="drag(event)"></span>
                    <span id="page2_subheader" class="dragndrop_elem subheader" draggable="true" ondragstart="drag(event)"></span>
                    <div id="page2_media" class="dragndrop_elem" draggable="true" ondragstart="drag(event)"></div>
                </div>
            </div>
            <div id='page3' ondrop="drop(event)" ondragover="allowDrop(event)" class="page">
                <div class="page_border">
                    <span id="page3_header" class="dragndrop_elem header" draggable="true" ondragstart="drag(event)"></span>
                    <span id="page3_subheader" class="dragndrop_elem subheader" draggable="true" ondragstart="drag(event)"></span>
                    <div id="page3_media" class="dragndrop_elem" draggable="true" ondragstart="drag(event)"></div>
                </div>
            </div>
            <div id='page4' ondrop="drop(event)" ondragover="allowDrop(event)" class="page">
                <div class="page_border">
                    <span id="page4_header" class="dragndrop_elem header" draggable="true" ondragstart="drag(event)"></span>
                    <span id="page4_subheader" class="dragndrop_elem subheader" draggable="true" ondragstart="drag(event)"></span>
                    <div id="page4_media" class="dragndrop_elem" draggable="true" ondragstart="drag(event)"></div>
                </div>
            </div>
            <div id="page5" ondrop="drop(event)" ondragover="allowDrop(event)" class="page">
                <div class="page_border">
                    <span id="page5_header" class="dragndrop_elem header" draggable="true" ondragstart="drag(event)"></span>
                    <span id="page5_subheader" class="dragndrop_elem subheader" draggable="true" ondragstart="drag(event)"></span>
                    <div id="page5_media" class="dragndrop_elem" draggable="true" ondragstart="drag(event)"></div>
                </div>
            </div>
            <div id="page6" ondrop="drop(event)" ondragover="allowDrop(event)" class="page">
                <div class="page_border">
                    <span id="page6_header" class="dragndrop_elem header" draggable="true" ondragstart="drag(event)"></span>
                    <span id="page6_subheader" class="dragndrop_elem subheader" draggable="true" ondragstart="drag(event)"></span>
                    <div id="page6_media" class="dragndrop_elem" draggable="true" ondragstart="drag(event)"></div>
                </div>
            </div>
        </div>
    <br/>
    <br/>
    <br/>
    <script src="../javascript/vendor/jquery.ui.widget.js"></script>
    <script src="../javascript/jquery.iframe-transport.js"></script>
    <script src="../javascript/jquery.fileupload.js"></script>
    <script>
    
    $(function () {
        $('#fileupload').fileupload({
            dataType: 'json',
            done: function (e, data) {
                $.each(data.files, function (index, file) {
                    //Change to a bootstrap pop-up
                    alert("DONE!" + index + " | " + file.name);
                    $("#fileupload").css('visibility', 'visible');
                    $("#upload_progress .bar").css('visibility', 'hidden');
                    $("#page1_media").append('<img src="../php/files/' + file.name 
                        + '" height="200" width="200" ></img>')
                });
            },
            progressall: function (e, data) {
                var progress = parseInt(data.loaded / data.total * 100, 10);
                $('#upload_progress .bar').css(
                    'width',
                    progress + '%'
                );
                $("#fileupload").css('visibility', 'hidden');
                $("#upload_progress .bar").css('visibility', 'visible');
            }
        });
    });
    </script>
	</body>
</html>
